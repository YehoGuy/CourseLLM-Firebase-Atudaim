{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/matan/Documents/GitHub/CourseLLM-Firebase/materialToMD/frontend/firebaseConfig.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\r\nimport { getAuth, connectAuthEmulator } from \"firebase/auth\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"fake-api-key\",\r\n  authDomain: \"localhost\",\r\n  projectId: \"course-llm-firebase\",\r\n  storageBucket: \"default-bucket\",\r\n  messagingSenderId: \"123456789\",\r\n  appId: \"1:123456789:web:abcdef\"\r\n};\r\n\r\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\r\nconst auth = getAuth(app);\r\n\r\n// SAFE GUARD: Only run this in the browser\r\nif (typeof window !== \"undefined\") {\r\n  // Only connect if we are on localhost\r\n  if (window.location.hostname === \"localhost\" || window.location.hostname === \"127.0.0.1\") {\r\n    try {\r\n      // Connect to emulator (Terminal 1)\r\n      connectAuthEmulator(auth, \"http://127.0.0.1:9099\", { disableWarnings: true });\r\n    } catch (e) {\r\n      // Ignore if already connected\r\n    }\r\n  }\r\n}\r\n\r\nexport { app, auth };"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;AACT;AAEA,MAAM,MAAM,CAAC,IAAA,uMAAO,IAAG,MAAM,GAAG,IAAA,6MAAa,EAAC,kBAAkB,IAAA,sMAAM;AACtE,MAAM,OAAO,IAAA,yMAAO,EAAC;AAErB,2CAA2C;AAC3C"}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/matan/Documents/GitHub/CourseLLM-Firebase/materialToMD/frontend/app/components/FileUploader.tsx"],"sourcesContent":["// components/FileUploader.tsx\r\n'use client';\r\n\r\nimport { ChangeEvent, FormEvent } from 'react';\r\n\r\ninterface Props {\r\n  file: File | null;\r\n  loading: boolean;\r\n  onFileChange: (file: File) => void;\r\n  onUpload: (e: FormEvent) => void;\r\n}\r\n\r\nexport default function FileUploader({ file, loading, onFileChange, onUpload }: Props) {\r\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files?.[0]) {\r\n      onFileChange(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-8\">\r\n      <h2 className=\"text-lg font-semibold mb-4\">Upload Document</h2>\r\n      <form onSubmit={onUpload} className=\"flex gap-4 items-center\">\r\n        <input \r\n          type=\"file\" \r\n          accept=\".pdf,.docx,.pptx\" \r\n          onChange={handleChange}\r\n          className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\r\n        />\r\n        <button \r\n          type=\"submit\" \r\n          disabled={!file || loading}\r\n          className={`px-8 py-2 rounded-full text-white font-medium transition-colors ${\r\n            loading ? 'bg-gray-400 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700'\r\n          }`}\r\n        >\r\n          {loading ? 'Processing...' : 'Convert'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA,8BAA8B;AAC9B;;AAWe,SAAS,aAAa,EAAE,IAAI,EAAE,OAAO,EAAE,YAAY,EAAE,QAAQ,EAAS;IACnF,MAAM,eAAe,CAAC;QACpB,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,EAAE;YACvB,aAAa,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;QAChC;IACF;IAEA,qBACE,0QAAC;QAAI,WAAU;;0BACb,0QAAC;gBAAG,WAAU;0BAA6B;;;;;;0BAC3C,0QAAC;gBAAK,UAAU;gBAAU,WAAU;;kCAClC,0QAAC;wBACC,MAAK;wBACL,QAAO;wBACP,UAAU;wBACV,WAAU;;;;;;kCAEZ,0QAAC;wBACC,MAAK;wBACL,UAAU,CAAC,QAAQ;wBACnB,WAAW,CAAC,gEAAgE,EAC1E,UAAU,mCAAmC,iCAC7C;kCAED,UAAU,kBAAkB;;;;;;;;;;;;;;;;;;AAKvC"}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/matan/Documents/GitHub/CourseLLM-Firebase/materialToMD/frontend/app/components/MarkdownViewer.tsx"],"sourcesContent":["'use client';\r\n\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\ninterface Props {\r\n  content: string;\r\n}\r\n\r\nexport default function MarkdownViewer({ content }: Props) {\r\n  // If no content, render nothing (so the test waits)\r\n  if (!content) return null;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mt-8 border-t pt-8\">\r\n      \r\n      {/* LEFT COLUMN: Raw Markdown (What the test is looking for) */}\r\n      <div className=\"flex flex-col\">\r\n        <h3 className=\"font-semibold mb-2 text-gray-700\">Raw Markdown</h3>\r\n        <textarea\r\n          readOnly\r\n          value={content}\r\n          className=\"w-full flex-1 min-h-[500px] p-4 border rounded font-mono text-sm bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        />\r\n      </div>\r\n\r\n      {/* RIGHT COLUMN: Preview */}\r\n      <div className=\"flex flex-col\">\r\n        <h3 className=\"font-semibold mb-2 text-gray-700\">Preview</h3>\r\n        <div className=\"w-full flex-1 min-h-[500px] p-6 border rounded overflow-y-auto prose prose-blue bg-white shadow-inner\">\r\n          <ReactMarkdown>{content}</ReactMarkdown>\r\n        </div>\r\n      </div>\r\n      \r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAQe,SAAS,eAAe,EAAE,OAAO,EAAS;IACvD,oDAAoD;IACpD,IAAI,CAAC,SAAS,OAAO;IAErB,qBACE,0QAAC;QAAI,WAAU;;0BAGb,0QAAC;gBAAI,WAAU;;kCACb,0QAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,0QAAC;wBACC,QAAQ;wBACR,OAAO;wBACP,WAAU;;;;;;;;;;;;0BAKd,0QAAC;gBAAI,WAAU;;kCACb,0QAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,0QAAC;wBAAI,WAAU;kCACb,cAAA,0QAAC,+NAAa;sCAAE;;;;;;;;;;;;;;;;;;;;;;;AAM1B"}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/matan/Documents/GitHub/CourseLLM-Firebase/materialToMD/frontend/app/material/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { onAuthStateChanged, User } from 'firebase/auth';\r\nimport { useRouter } from 'next/navigation';\r\nimport { auth } from '../../firebaseConfig'; \r\nimport FileUploader from '../components/FileUploader';\r\nimport MarkdownViewer from '../components/MarkdownViewer';\r\n\r\nexport default function MaterialToMD() {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loadingAuth, setLoadingAuth] = useState(true);\r\n  \r\n  // App State\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [markdown, setMarkdown] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const router = useRouter();\r\n  const API_URL = '/api';\r\n\r\n  // 1. Safe Auth Check\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n      if (!currentUser) {\r\n        router.push('/login');\r\n      } else {\r\n        setUser(currentUser);\r\n      }\r\n      setLoadingAuth(false);\r\n    });\r\n    return () => unsubscribe();\r\n  }, [router]);\r\n\r\n  // 2. The Real Conversion Logic\r\n  const handleUpload = async (e: React.FormEvent) => {\r\n    e.preventDefault(); // Stop page reload\r\n    if (!file || !user) return;\r\n\r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const token = await user.getIdToken();\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n\r\n      // Send to Backend\r\n      const response = await fetch(`${API_URL}/convert`, {\r\n        method: 'POST',\r\n        headers: { 'Authorization': `Bearer ${token}` },\r\n        body: formData,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errData = await response.json();\r\n        throw new Error(errData.detail || 'Conversion failed');\r\n      }\r\n\r\n      const data = await response.json();\r\n      \r\n      // Handle different variable names (safety net)\r\n      const content = data.content || data.markdown || data.text || data.result;\r\n      \r\n      if (!content) {\r\n          console.error(\"Backend sent:\", data);\r\n          throw new Error(\"Received empty content from backend\");\r\n      }\r\n\r\n      setMarkdown(content);\r\n\r\n    } catch (err: any) {\r\n      console.error(err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // 3. Loading Screen\r\n  if (loadingAuth) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <h1 className=\"text-xl font-bold text-blue-600\">Checking Access...</h1>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto p-8\">\r\n      <div className=\"flex justify-between items-center mb-8 border-b pb-4\">\r\n        <h1 className=\"text-3xl font-bold text-gray-800\">Material to Markdown</h1>\r\n        <div className=\"flex items-center gap-4\">\r\n          <span className=\"text-gray-600\">{user.email}</span>\r\n          <button onClick={() => auth.signOut()} className=\"text-sm text-red-500 font-semibold hover:underline\">\r\n            Sign Out\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Real Components Hooked Up to Logic */}\r\n      <FileUploader \r\n        file={file} \r\n        loading={loading} \r\n        onFileChange={setFile} \r\n        onUpload={handleUpload} \r\n      />\r\n      \r\n      {error && (\r\n        <div className=\"mb-8 p-3 bg-red-50 text-red-700 rounded border border-red-200\">\r\n            {error}\r\n        </div>\r\n      )}\r\n      \r\n      {/* This renders the 'Raw Markdown' header the robot is looking for */}\r\n      <MarkdownViewer content={markdown} />\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6OAAQ,EAAc;IAC9C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,6OAAQ,EAAC;IAE/C,YAAY;IACZ,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6OAAQ,EAAc;IAC9C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6OAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6OAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6OAAQ,EAAC;IAEnC,MAAM,SAAS,IAAA,2KAAS;IACxB,MAAM,UAAU;IAEhB,qBAAqB;IACrB,IAAA,8OAAS,EAAC;QACR,MAAM,cAAc,IAAA,oNAAkB,EAAC,kJAAI,EAAE,CAAC;YAC5C,IAAI,CAAC,aAAa;gBAChB,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,QAAQ;YACV;YACA,eAAe;QACjB;QACA,OAAO,IAAM;IACf,GAAG;QAAC;KAAO;IAEX,+BAA+B;IAC/B,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc,IAAI,mBAAmB;QACvC,IAAI,CAAC,QAAQ,CAAC,MAAM;QAEpB,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,QAAQ,MAAM,KAAK,UAAU;YACnC,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,QAAQ;YAExB,kBAAkB;YAClB,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,QAAQ,CAAC,EAAE;gBACjD,QAAQ;gBACR,SAAS;oBAAE,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBAAC;gBAC9C,MAAM;YACR;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,UAAU,MAAM,SAAS,IAAI;gBACnC,MAAM,IAAI,MAAM,QAAQ,MAAM,IAAI;YACpC;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,+CAA+C;YAC/C,MAAM,UAAU,KAAK,OAAO,IAAI,KAAK,QAAQ,IAAI,KAAK,IAAI,IAAI,KAAK,MAAM;YAEzE,IAAI,CAAC,SAAS;gBACV,QAAQ,KAAK,CAAC,iBAAiB;gBAC/B,MAAM,IAAI,MAAM;YACpB;YAEA,YAAY;QAEd,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC;YACd,SAAS,IAAI,OAAO;QACtB,SAAU;YACR,WAAW;QACb;IACF;IAEA,oBAAoB;IACpB,IAAI,aAAa;QACf,qBACE,0QAAC;YAAI,WAAU;sBACb,cAAA,0QAAC;gBAAG,WAAU;0BAAkC;;;;;;;;;;;IAGtD;IAEA,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,0QAAC;QAAI,WAAU;;0BACb,0QAAC;gBAAI,WAAU;;kCACb,0QAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,0QAAC;wBAAI,WAAU;;0CACb,0QAAC;gCAAK,WAAU;0CAAiB,KAAK,KAAK;;;;;;0CAC3C,0QAAC;gCAAO,SAAS,IAAM,kJAAI,CAAC,OAAO;gCAAI,WAAU;0CAAqD;;;;;;;;;;;;;;;;;;0BAO1G,0QAAC,yKAAY;gBACX,MAAM;gBACN,SAAS;gBACT,cAAc;gBACd,UAAU;;;;;;YAGX,uBACC,0QAAC;gBAAI,WAAU;0BACV;;;;;;0BAKP,0QAAC,2KAAc;gBAAC,SAAS;;;;;;;;;;;;AAG/B"}}]
}