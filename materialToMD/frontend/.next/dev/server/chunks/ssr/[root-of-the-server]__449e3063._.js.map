{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/matan/Documents/GitHub/CourseLLM-Firebase/materialToMD/frontend/firebaseConfig.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\r\nimport { getAuth, connectAuthEmulator } from \"firebase/auth\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"fake-api-key\",\r\n  authDomain: \"localhost\",\r\n  projectId: \"course-llm-firebase\",\r\n  storageBucket: \"default-bucket\",\r\n  messagingSenderId: \"123456789\",\r\n  appId: \"1:123456789:web:abcdef\"\r\n};\r\n\r\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\r\nconst auth = getAuth(app);\r\n\r\n// SAFE GUARD: Only run this in the browser\r\nif (typeof window !== \"undefined\") {\r\n  // Only connect if we are on localhost\r\n  if (window.location.hostname === \"localhost\" || window.location.hostname === \"127.0.0.1\") {\r\n    try {\r\n      // Connect to emulator (Terminal 1)\r\n      connectAuthEmulator(auth, \"http://127.0.0.1:9099\", { disableWarnings: true });\r\n    } catch (e) {\r\n      // Ignore if already connected\r\n    }\r\n  }\r\n}\r\n\r\nexport { app, auth };"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;AACT;AAEA,MAAM,MAAM,CAAC,IAAA,uMAAO,IAAG,MAAM,GAAG,IAAA,6MAAa,EAAC,kBAAkB,IAAA,sMAAM;AACtE,MAAM,OAAO,IAAA,yMAAO,EAAC;AAErB,2CAA2C;AAC3C"}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/matan/Documents/GitHub/CourseLLM-Firebase/materialToMD/frontend/app/login/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from 'react';\r\n// 1. Add 'createUserWithEmailAndPassword' to imports\r\nimport { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from 'firebase/auth';\r\nimport { useRouter } from 'next/navigation';\r\nimport { app } from '../../firebaseConfig';\r\n\r\nexport default function LoginPage() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const router = useRouter();\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    const auth = getAuth(app);\r\n    setError('');\r\n\r\n    try {\r\n      await signInWithEmailAndPassword(auth, email, password);\r\n      console.log(\"✅ Login Success! Redirecting...\");\r\n      router.push('/material'); \r\n    } catch (err: any) {\r\n      console.error(\"❌ LOGIN ERROR:\", err.code, err.message); // <--- THIS WILL SHOW IN TERMINAL\r\n\r\n      // Auto-Register Logic\r\n      if (err.code === 'auth/user-not-found' || err.code === 'auth/invalid-credential' || err.code === 'auth/invalid-login-credentials') {\r\n        try {\r\n          console.log(\"⚠️ User not found. Attempting to auto-register...\");\r\n          await createUserWithEmailAndPassword(auth, email, password);\r\n          console.log(\"✅ Registration Success! Redirecting...\");\r\n          router.push('/material');\r\n        } catch (signUpErr: any) {\r\n          console.error(\"❌ REGISTRATION FAILED:\", signUpErr.code, signUpErr.message);\r\n          setError('Failed to create account: ' + signUpErr.message);\r\n        }\r\n      } else {\r\n        setError('Login failed: ' + err.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: 'flex', justifyContent: 'center', marginTop: '50px' }}>\r\n      <form onSubmit={handleLogin} style={{ display: 'flex', flexDirection: 'column', gap: '10px', width: '300px' }}>\r\n        <h1 className=\"text-2xl font-bold\">Login / Register</h1>\r\n        <p className=\"text-sm text-gray-500\">Entering a new email will auto-create an account.</p>\r\n        \r\n        {error && <p style={{ color: 'red' }}>{error}</p>}\r\n        \r\n        <input \r\n          type=\"email\" \r\n          placeholder=\"Email\" \r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          required\r\n          style={{ padding: '8px', border: '1px solid #ccc' }}\r\n        />\r\n        \r\n        <input \r\n          type=\"password\" \r\n          placeholder=\"Password\" \r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          required\r\n          style={{ padding: '8px', border: '1px solid #ccc' }}\r\n        />\r\n        \r\n        <button type=\"submit\" style={{ padding: '10px', background: 'blue', color: 'white', border: 'none' }}>\r\n          Sign In\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA,qDAAqD;AACrD;AAAA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6OAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6OAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6OAAQ,EAAC;IACnC,MAAM,SAAS,IAAA,2KAAS;IAExB,MAAM,cAAc,OAAO;QACzB,EAAE,cAAc;QAChB,MAAM,OAAO,IAAA,yMAAO,EAAC,iJAAG;QACxB,SAAS;QAET,IAAI;YACF,MAAM,IAAA,4NAA0B,EAAC,MAAM,OAAO;YAC9C,QAAQ,GAAG,CAAC;YACZ,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,kBAAkB,IAAI,IAAI,EAAE,IAAI,OAAO,GAAG,kCAAkC;YAE1F,sBAAsB;YACtB,IAAI,IAAI,IAAI,KAAK,yBAAyB,IAAI,IAAI,KAAK,6BAA6B,IAAI,IAAI,KAAK,kCAAkC;gBACjI,IAAI;oBACF,QAAQ,GAAG,CAAC;oBACZ,MAAM,IAAA,gOAA8B,EAAC,MAAM,OAAO;oBAClD,QAAQ,GAAG,CAAC;oBACZ,OAAO,IAAI,CAAC;gBACd,EAAE,OAAO,WAAgB;oBACvB,QAAQ,KAAK,CAAC,0BAA0B,UAAU,IAAI,EAAE,UAAU,OAAO;oBACzE,SAAS,+BAA+B,UAAU,OAAO;gBAC3D;YACF,OAAO;gBACL,SAAS,mBAAmB,IAAI,OAAO;YACzC;QACF;IACF;IAEA,qBACE,0QAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,gBAAgB;YAAU,WAAW;QAAO;kBACzE,cAAA,0QAAC;YAAK,UAAU;YAAa,OAAO;gBAAE,SAAS;gBAAQ,eAAe;gBAAU,KAAK;gBAAQ,OAAO;YAAQ;;8BAC1G,0QAAC;oBAAG,WAAU;8BAAqB;;;;;;8BACnC,0QAAC;oBAAE,WAAU;8BAAwB;;;;;;gBAEpC,uBAAS,0QAAC;oBAAE,OAAO;wBAAE,OAAO;oBAAM;8BAAI;;;;;;8BAEvC,0QAAC;oBACC,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,QAAQ;oBACR,OAAO;wBAAE,SAAS;wBAAO,QAAQ;oBAAiB;;;;;;8BAGpD,0QAAC;oBACC,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oBAC3C,QAAQ;oBACR,OAAO;wBAAE,SAAS;wBAAO,QAAQ;oBAAiB;;;;;;8BAGpD,0QAAC;oBAAO,MAAK;oBAAS,OAAO;wBAAE,SAAS;wBAAQ,YAAY;wBAAQ,OAAO;wBAAS,QAAQ;oBAAO;8BAAG;;;;;;;;;;;;;;;;;AAM9G"}}]
}